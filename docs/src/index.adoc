:github-readme: ../../README.adoc

include::{github-readme}[tags=vardef]

:projectpage: https://github.com/{git-repository}
:bintray_repo: https://bintray.com/jmini/maven
:bintraypage: {bintray_repo}/htmlchecker
:bintrayrepo: http://dl.bintray.com/jmini/maven/

include::{github-readme}[tags=header]

== URLs

* link:{homepage}[Project home] (this page)
* link:{projectpage}[GitHub project]
* link:{bintraypage}[Binaries on Bintray]
* link:{issues}[Issue tracker]

TIP: Do you want to improve this page? Please git-link:self[edit it on GitHub].

include::{github-readme}[tags=description]

=== Extended description

Htmlchecker scans the `.html` files present in a given directory and verify that certain rules are violated or not.
A report with all warnings and errors can be obtained as HTML or as XML file.

==== Checked rules

Following rules ensures that local files referenced as attribute of some html tags are present.
Missing files correspond to an error.

* git-link:/htmlchecker-core/src/main/resources/doc/rules/LocalATagRule.md[LOCAL_A_TAG_RULE] (`href` attribute in the `<a>` tag)
* git-link:/htmlchecker-core/src/main/resources/doc/rules/LocalImgTagRule.md[LOCAL_IMG_TAG_RULE] (`src` attribute in the `<img>` tag)
* git-link:/htmlchecker-core/src/main/resources/doc/rules/LocalLinkTagRule.md[LOCAL_LINK_TAG_RULE] (`href` attribute in the `<link>` tag)
* git-link:/htmlchecker-core/src/main/resources/doc/rules/LocalScriptTagRule.md[LOCAL_SCRIPT_TAG_RULE] (`src` attribute in the `<script>` tag)

==== Output report

The html report looks like this:

link:example_report_html.png[image:example_report_html.png[HTML Report,300,308]]

The xml report looks like this:

[source,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<issues>
    <issue
        name="LOCAL_A_TAG_RULE"
        severity="Error"
        message="File &apos;page2.html&apos; (relative to &apos;index.html&apos;) ......"
        category="Local"
        summary="Local file should be present"
        explanation="All local file referenced by the `href` attribute ......"
        location="....../site-example/src/main/resources/site/index.html"
        lineNumber="15"
    />
    <!-- ..... -->
</issues>
----

=== Download

A compiled version of the project is available on link:{bintraypage}[Bintray] in a maven repository: `{bintrayrepo}`

You might use maven or gradle to fetch the dependencies you need, depending on your use case.
You can also directly use the maven plugin as step of your build.

For the command line tool, a zip file is also available.
It contains all the requested dependencies in a `lib` subfolder and basic startup scripts.

=== Run the tool

==== As maven plugin

In the `plugins` section of your `build` section, you can add something like this:

[source,xml]
.Maven plugin usage example
----
include::../../site-example/pom.xml[tags="plugin-usage", indent="0"]
----

Do not forget to register the maven repository `{bintrayrepo}` as `pluginRepository` (directly in your pom or in your maven settings).

Possible configuration parameters for the maven plugin:

sourceDirectory:: Directory to scan (default value is `${project.basedir}`).
outputType:: Type of report that should be created, possible values:
**** `html` (default)
**** `xml`
outputFile:: Name of the file, where the report will be created (default value is `${project.build.directory}/report.html`).
srcPathPrefix:: Local or remote path to the source directory, if not set (default) a relative path to the local file will be computed. For the `site-example` project in this repository, the remote path to view the files on GitHub is: `https://github.com/jmini/htmlchecker/blob/master/src/main/resources/site/`.
enableOnlyRules:: Only check for these rules. Ignored if not set (default).
disableRules:: Disable the list of rules. Ignored if not set (default).
enableRules:: Enable the list of rules. Ignored if not set (default).
enableCategories:: Run all rules of certain categories. Ignored if not set (default).
noWarnings:: Only check for errors; ignore warnings. Possible values:
**** `false` (default)
**** `true`
allWarnings:: Check all warnings, including those off by default. Possible values:
**** `false` (default)
**** `true`
waringsAreErrors:: Treat all warnings as errors. Possible values:
**** `false` (default)
**** `true`

==== From the command line

After having unzipped the archive, you can run `htmlchecker.cmd` or `htmlchecker.sh` depending on your operating system.

.Run the command line tool example
----
htmlchecker --html myreport.html site-example/src/main/resources/site/
----

Here is the complete list of options:

.Complete list of options for htmlchecker
----
include::../../htmlchecker-cli/src/test/resources/htmlchecker-help.txt[]
----

include::{github-readme}[tags=contact-section]

include::{github-readme}[tags=license-section]

